<!doctype html><html lang=en><head><title>Linux Process Lifecycle :: Nitin's Pages</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="These are notes taken while learning Linux internals. My main source is The Linux Programming Interface.
Overview The four major system calls involved in the lifecycle of a process are the following.
fork - Create a replica of parent process exec - Replace the program with intended new program wait - Monitor the status of child process exit - Terminate the process There are 2 other system calls which might be used as well"><meta name=keywords content=","><meta name=robots content="noodp"><link rel=canonical href=https://nitinsatish.github.io/posts/linux-process-lifecycle/><link rel=stylesheet href=https://nitinsatish.github.io/assets/style.css><link rel=stylesheet href=https://nitinsatish.github.io/assets/blue.css><link rel=apple-touch-icon href=https://nitinsatish.github.io/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://nitinsatish.github.io/img/favicon/blue.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Linux Process Lifecycle"><meta property="og:description" content="These are notes taken while learning Linux internals. My main source is The Linux Programming Interface.
Overview The four major system calls involved in the lifecycle of a process are the following.
fork - Create a replica of parent process exec - Replace the program with intended new program wait - Monitor the status of child process exit - Terminate the process There are 2 other system calls which might be used as well"><meta property="og:url" content="https://nitinsatish.github.io/posts/linux-process-lifecycle/"><meta property="og:site_name" content="Nitin's Pages"><meta property="og:image" content="https://nitinsatish.github.io"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-07-28 17:49:41 +0530 +0530"></head><body class=blue><div class="container full headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Nitin's Pages</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://nitinsatish.github.io/posts/linux-process-lifecycle/>Linux Process Lifecycle</a></h1><div class=post-meta><span class=post-date>2022-07-28</span>
<span class=post-author>:: Nitin</span>
<span class=post-reading-time>:: 3 min read (476 words)</span></div><span class=post-tags>#<a href=https://nitinsatish.github.io/tags/linux/>linux</a>&nbsp;
#<a href=https://nitinsatish.github.io/tags/os/>OS</a>&nbsp;</span><div class=post-content><div><p>These are notes taken while learning Linux internals. My main source is <a href=https://man7.org/tlpi/>The Linux Programming Interface</a>.</p><h2 id=overview>Overview<a href=#overview class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The four major system calls involved in the lifecycle of a process are the following.</p><ol><li><strong>fork</strong> - Create a replica of parent process</li><li><strong>exec</strong> - Replace the program with intended new program</li><li><strong>wait</strong> - Monitor the status of child process</li><li><strong>exit</strong> - Terminate the process</li></ol><p>There are 2 other system calls which might be used as well</p><ul><li><strong>system</strong> - Allows executing of arbitrary shell commands</li><li><strong>clone</strong> - Used in Linux for creating threads</li></ul><img src=/img/process_life.png alt="Hello Friend" class=center style=border-radius:8px><h3 id=1-fork>1. Fork<a href=#1-fork class=hanchor arialabel=Anchor>&#8983;</a></h3><p>This system call creates a child process which is a replica of parent process. The data, heap and stack memory segments are copied to the child. The text segment of memory is made read-only shared between parent and child. The file descriptors of parent are duplicated in child. The stdio buffers of parent are also inherited by child.<br>After <code>fork</code> depending on system it can be either parent or child that is scheduled for CPU time next.</p><p><code>child_pid = fork()</code></p><p>In modern Linux, the virtual memory of parent does not at once get copied to child. This is because in many cases the child calls <code>exec</code> just after creation which clears the memory. So instead copying memory kernel uses copy-on-write (COW) method. The kernel shares the memory between parent and child and on receiving any call to modify the memory, creates a copy of virtual memory to the calling process.</p><p>There are pros and cons for scheduling parent or child at once after fork. Child getting scheduled is helpful if it calls <code>exec</code> replacing the memory. In this case parents&rsquo; memory stays intact and does not require re-allocation. The advantage of running parent process is that the memory pages required by the process are probably already loaded and it enables faster execution.
In Linux, the parent process is generally scheduled to run after fork. This kernel setting can changed using sysconfig or /proc filesystem.</p><p>The file descriptors are copied to child and so child shares the file description table. The file_offset which points the location of file last access set by <code>read</code>, <code>write</code>, <code>lseek</code> system calls. The file_offset being shared prevents parent and child from over-writing each other. But it might still intermingle the writes. To avoid intermingling of writes <code>wait</code> system call can be used, so that parent process is blocked till child is running.</p><h4 id=vfork>vfork<a href=#vfork class=hanchor arialabel=Anchor>&#8983;</a></h4><p><code>vfork</code> is variant of fork system call that is more efficient if the child is supposed to <code>exec</code> after fork. This does not copy parent&rsquo;s memory and blocks the parent until the child calls <code>exec</code>.</p><h3 id=2-exec>2. Exec<a href=#2-exec class=hanchor arialabel=Anchor>&#8983;</a></h3><p>There isn&rsquo;t system call named exec, instead <code>execve</code> and list of exec variants are used. This causes the memory of the child inherited parent to be cleared and the new program passed as argument to exec function to be loaded.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://nitinsatish.github.io/posts/my-first-post/><span class=button__text>My First Post</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://nitinsatish.github.io/assets/main.js></script>
<script src=https://nitinsatish.github.io/assets/prism.js></script></div></body></html>